{"version":3,"file":"comment-plugin.esm.js","sources":["../src/utils.js","../src/draggable.js","../src/comment.js","../src/frame-comment.js","../src/inline-comment.js","../src/manager.js","../src/index.js"],"sourcesContent":["const min = (arr) => arr.length === 0 ? 0 : Math.min(...arr);\nconst max = (arr) => arr.length === 0 ? 0 : Math.max(...arr);\n\nexport function intersectRect(r1, r2) {\n    return !(\n        r2.left > r1.right || \n        r2.right < r1.left || \n        r2.top > r1.bottom ||\n        r2.bottom < r1.top\n    );\n}\n\nexport function containsRect(r1, r2) {\n    return (\n        r2.left > r1.left && \n        r2.right < r1.right && \n        r2.top > r1.top &&\n        r2.bottom < r1.bottom\n    );\n}\n\nexport function nodesBBox(editor, nodes, margin) {\n    const left = min(nodes.map(node => node.position[0])) - margin;\n    const top = min(nodes.map(node => node.position[1])) - margin;\n    const right = max(nodes.map(node => node.position[0] + editor.view.nodes.get(node).el.clientWidth)) + 2 * margin;\n    const bottom = max(nodes.map(node => node.position[1] + editor.view.nodes.get(node).el.clientHeight)) + 2 * margin;\n    \n    return {\n        left,\n        right,\n        top,\n        bottom,\n        width: Math.abs(left - right),\n        height: Math.abs(top - bottom),\n        getCenter: () => {\n            return [\n                (left + right) / 2,\n                (top + bottom) / 2\n            ];\n        }\n    };\n}\n\nexport function listenWindow(event, handler) {\n    window.addEventListener(event, handler);\n    \n    return () => {\n        window.removeEventListener(event, handler);\n    }\n}","import { listenWindow } from './utils';\n\nexport default class Draggable {\n\n    constructor(el, onStart = () => {}, onTranslate = () => {}, onDrag = () => {}) {\n        this.mouseStart = null;\n\n        this.el = el;\n        this.onStart = onStart;\n        this.onTranslate = onTranslate;\n        this.onDrag = onDrag;\n\n        this.destroy = this.initEvents(el);\n    }\n\n    initEvents(el) {\n        el.addEventListener('pointerdown', this.down.bind(this));\n        \n        const destroyMove = listenWindow('pointermove', this.move.bind(this))\n        const destroyUp = listenWindow('pointerup', this.up.bind(this));\n\n        return () => {\n            destroyMove();\n            destroyUp();\n        }\n    }\n\n    getCoords(e) {\n        const props = e.touches ? e.touches[0] : e;\n\n        return [props.pageX, props.pageY];\n    }\n\n    down(e) {\n        e.stopPropagation();\n\n        if (e.which === 1) {\n            this.mouseStart = this.getCoords(e);\n            this.onStart();\n        }\n    }\n\n    move(e) {\n        if (!this.mouseStart) return;\n        e.preventDefault();\n        e.stopPropagation();\n\n        let [x, y] = this.getCoords(e);\n        let delta = [x - this.mouseStart[0], y - this.mouseStart[1]];\n        let zoom = this.el.getBoundingClientRect().width / this.el.offsetWidth;\n\n        this.onTranslate(delta[0] / zoom, delta[1] / zoom);\n    }\n\n    up() {\n        if (this.mouseStart) {\n            this.onDrag();\n        }\n\n        this.mouseStart = null;\n    }\n\n    // mutable method\n    destroy() { }\n}\n","import Draggable from './draggable';\n\nexport default class Comment {\n    constructor(text, editor) {\n        this.editor = editor;\n        this.text = text;\n        this.scale = 1;\n        this.x = 0;\n        this.y = 0;\n        this.dragPosition = [0, 0];\n        this.links = [];\n        this.data = {};\n \n        this.initView();\n        this.update();\n    }\n\n    initView() {\n        this.el = document.createElement('div');\n        this.el.tabIndex = 1;\n        this.el.addEventListener('contextmenu', this.onContextMenu.bind(this));\n        this.el.addEventListener('focus', this.onFocus.bind(this));\n        this.el.addEventListener('blur', this.onBlur.bind(this));\n    \n        this.draggable = new Draggable(this.el, () => this.onStart(), (dx, dy) => this.onTranslate(dx, dy));\n    }\n\n    linkTo(ids) {\n        this.links = ids || [];\n    }\n\n    linkedTo(node) {\n        return this.links.includes(node.id);\n    }\n\n    k() {\n        return 1;\n    }\n\n    onContextMenu(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.editor.trigger('editcomment', this);\n    }\n\n    onFocus() {\n        //this.scale = Math.max(1, 1 / this.k());\n        this.update();\n        this.editor.trigger('commentselected', this)\n    }\n\n    focused() {\n        return document.activeElement === this.el;\n    }\n\n    onBlur() {\n        //this.scale = 1;\n        this.update()\n    }\n\n    blur() {\n        this.el.blur();\n    }\n\n    onStart() {\n        this.dragPosition = [this.x, this.y];\n    }\n\n    onTranslate (dx, dy) {\n        const [x, y] = this.dragPosition;\n\n        this.x = x + this.scale * dx;\n        this.y = y + this.scale * dy;\n        \n        this.update();\n        this.editor.trigger('commenttranslate', this);\n    }\n\n    update() {\n        this.el.innerText = this.text;\n        this.el.style.transform = `translate(${this.x}px, ${this.y}px) scale(${this.scale})`;\n    }\n\n    toJSON() {\n        return {\n            text: this.text,\n            position: [ this.x, this.y ],\n            links: this.links\n        }\n    }\n\n    destroy() {\n        this.draggable.destroy();\n    }\n}","import Comment from './comment';\nimport { containsRect } from './utils';\n\nexport default class FrameComment extends Comment {\n    constructor(text, editor) {\n        super(text, editor);\n        \n        this.width = 0;\n        this.height = 0;\n        this.links = [];\n        this.el.className = 'frame-comment';\n    }\n\n    linkedNodesView() {\n        return this.links\n            .map(id => this.editor.nodes.find(n => n.id === id))\n            .map(node => this.editor.view.nodes.get(node));\n    }\n\n    onStart() {\n        super.onStart();\n        this.linkedNodesView().map(nodeView => nodeView.onStart())\n    }\n\n    onTranslate(dx, dy) {\n        super.onTranslate(dx, dy);\n        this.linkedNodesView().map(nodeView => nodeView.onDrag(dx, dy))\n    }\n\n    isContains(node) {\n        const commRect = this.el.getBoundingClientRect();\n        const view = this.editor.view.nodes.get(node);\n    \n        return containsRect(commRect, view.el.getBoundingClientRect());\n    }\n\n    update() {\n        super.update();\n\n        this.el.style.width = this.width+'px';\n        this.el.style.height = this.height+'px';\n    }\n\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            type: 'frame',\n            width: this.width,\n            height: this.height\n        }\n    }\n}","import Comment from './comment';\nimport { intersectRect } from './utils';\n\nexport default class InlineComment extends Comment {\n    constructor(text, editor) {\n        super(text, editor);\n        \n        this.el.className = 'inline-comment';\n        this.el.addEventListener('mouseup', this.onDrag.bind(this));\n    }\n\n    onDrag() {\n        const intersection = this.getIntersectNode();\n\n        this.linkTo(intersection ? [intersection.node.id] : []);\n    }\n\n    getIntersectNode() {\n        const commRect = this.el.getBoundingClientRect();\n\n        return Array.from(this.editor.view.nodes)\n            .map(([node, view]) => {\n                return { node, rect: view.el.getBoundingClientRect() };\n            })\n            .find(({ rect }) => {\n                return intersectRect(commRect, rect);\n            });\n    }\n\n    offset(dx, dy) {\n        this.x += dx;\n        this.y += dy;\n        this.update();\n    } \n\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            type: 'inline'\n        }\n    }\n}","import FrameComment from './frame-comment';\nimport InlineComment from './inline-comment';\n\nexport default class CommentManager {\n    constructor(editor) {\n        this.editor = editor;\n        this.comments = [];\n\n        editor.on('zoomed', () => {\n            this.comments.map(c => c.blur.call(c));\n        });\n    }\n\n    addInlineComment(text, [ x, y ], links = [], data = {}) {\n        let comment = new InlineComment(text, this.editor);\n\n        comment.k = () => this.editor.view.area.transform.k;\n        comment.x = x;\n        comment.y = y;\n        comment.linkTo(links);\n        comment.data = data;\n\n        this.addComment(comment);\n    }\n\n    addFrameComment(text, [ x, y ], links = [], width = 0, height = 0) {\n        let comment = new FrameComment(text, this.editor);\n\n        comment.x = x;\n        comment.y = y;\n        comment.width = width;\n        comment.height = height;\n        comment.linkTo(links);\n        \n        this.addComment(comment);\n    }\n\n    addComment(comment) {\n        comment.update();\n        this.comments.push(comment);\n\n        this.editor.view.area.appendChild(comment.el);\n        this.editor.trigger('commentcreated', comment);\n    }\n\n    deleteComment(comment) {\n        this.editor.view.area.removeChild(comment.el);\n        this.comments.splice(this.comments.indexOf(comment), 1);\n        comment.destroy();\n\n        this.editor.trigger('commentremoved', comment);\n    }\n\n    deleteFocusedComment() {\n        const focused = this.comments.find(c => c.focused());\n        \n        if (focused)\n            this.deleteComment(focused)\n    }\n\n    deleteComments() {\n        [...this.comments].map(c => this.deleteComment(c));\n    }\n\n    toJSON() {\n        return this.comments.map(c => c.toJSON())\n    }\n\n    fromJSON(list) {\n        this.deleteComments();\n        list.map(item => {\n            if (item.type === 'frame') {\n                this.addFrameComment(item.text, item.position, item.links, item.width, item.height)\n            } else {\n                this.addInlineComment(item.text, item.position, item.links);\n            }\n        });\n    }\n\n    destroy() {\n        this.comments.forEach(comment => comment.destroy());\n    }\n}","import CommentManager from './manager';\nimport FrameComment from './frame-comment';\nimport InlineComment from './inline-comment';\nimport { nodesBBox, listenWindow } from './utils';\n\n// eslint-disable-next-line max-statements\nfunction install(editor, { margin = 30, disableBuiltInEdit = false }) {\n    editor.bind('commentselected');\n    editor.bind('commentcreated');\n    editor.bind('commentremoved');\n    editor.bind('syncframes');\n    editor.bind('addcomment');\n    editor.bind('removecomment');\n    editor.bind('editcomment');\n    editor.bind('commenttranslate');\n\n    const manager = new CommentManager(editor);\n\n    if (!disableBuiltInEdit) { \n        editor.on('editcomment', (comment) => {\n            comment.text = prompt('Edit comment', comment.text)\n            comment.update();\n        });\n    }\n\n    const destroyKeyListener = listenWindow('keydown', function handleKey(e) {\n        if (e.code === 'KeyF' && e.shiftKey) {\n            const ids = editor.selected.list.map(node => node.id);\n            const nodes = ids.map(id => editor.nodes.find(n => n.id === id));\n    \n            editor.trigger('addcomment', ({ type: 'frame', nodes }))\n        } else if (e.code === 'KeyC' && e.shiftKey) {\n            const position = Object.values(editor.view.area.mouse);\n\n            editor.trigger('addcomment', ({ type: 'inline', position }))\n        } else if (e.code === 'Delete') {\n            manager.deleteFocusedComment();\n        }\n    });\n\n    editor.on('addcomment', ({ type, text, nodes, position, data }) => {\n        if (type === 'inline') {\n            manager.addInlineComment(text, position, null, data);\n        } else if (type === 'frame') {\n            const { left, top, width, height } = nodesBBox(editor, nodes, margin);\n            const ids = nodes.map(n => n.id);\n        \n            manager.addFrameComment(text, position || [ left, top ], ids, width, height);\n        } else {\n            throw new Error(`type '${type}' not supported`);\n        }\n    })\n\n    editor.on('removecomment', ({ comment, type }) => {\n        if (comment) {\n            manager.deleteComment(comment)\n        } else if (type === 'inline') {\n            manager.comments\n                .filter(c => c instanceof InlineComment)\n                .map(c => manager.deleteComment(c))\n        } else if (type === 'frame') {\n            manager.comments\n                .filter(c => c instanceof FrameComment)\n                .map(c => manager.deleteComment(c))\n        }\n    });\n\n    editor.on('syncframes', () => {\n        manager.comments\n            .filter(comment => comment instanceof FrameComment)\n            .map(comment => {\n                const nodes = comment.links.map(id => editor.nodes.find(n => n.id === id));\n                const { left, top, width, height } = nodesBBox(editor, nodes, margin);\n\n                comment.x = left;\n                comment.y = top;\n                comment.width = width;\n                comment.height = height;\n                \n                comment.update()\n            });\n    })\n\n    editor.on('nodetranslated', ({ node, prev }) => {\n        const dx = node.position[0] - prev[0];\n        const dy = node.position[1] - prev[1];\n\n        manager.comments\n            .filter(comment => comment instanceof InlineComment)\n            .filter(comment => comment.linkedTo(node))\n            .map(comment => comment.offset(dx, dy));\n    });\n\n    editor.on('nodedraged', node => {\n        manager.comments\n            .filter(comment => comment instanceof FrameComment)\n            .filter(comment => {\n                const contains = comment.isContains(node);\n                const links = comment.links.filter(id => id !== node.id);\n\n                comment.links = contains ? [...links, node.id] : links;\n            });\n    });\n\n    editor.on('commentselected', () => {\n        const list = [...editor.selected.list];\n\n        editor.selected.clear();\n        list.map(node => node.update ? node.update() : null);\n    })\n\n    editor.on('export', data => {\n        data.comments = manager.toJSON();\n    });\n\n    editor.on('import', data => {\n        manager.fromJSON(data.comments || []);\n    });\n\n    if (editor.exist('clear')) { // compatibility with previous versions\n        editor.on('clear', () => manager.deleteComments())\n    }\n\n    editor.on('destroy', () => {\n        manager.destroy()\n        destroyKeyListener();\n    });\n}\n\nexport default {\n    name: 'comment',\n    install\n}"],"names":["min","arr","length","Math","max","intersectRect","r1","r2","left","right","top","bottom","containsRect","nodesBBox","editor","nodes","margin","map","node","position","view","get","el","clientWidth","clientHeight","width","abs","height","getCenter","listenWindow","event","handler","window","addEventListener","removeEventListener","Draggable","onStart","onTranslate","onDrag","mouseStart","destroy","initEvents","down","bind","destroyMove","move","destroyUp","up","e","props","touches","pageX","pageY","stopPropagation","which","getCoords","preventDefault","x","y","delta","zoom","getBoundingClientRect","offsetWidth","Comment","text","scale","dragPosition","links","data","initView","update","document","createElement","tabIndex","onContextMenu","onFocus","onBlur","draggable","dx","dy","ids","includes","id","trigger","activeElement","blur","innerText","style","transform","FrameComment","className","find","n","linkedNodesView","nodeView","commRect","type","InlineComment","intersection","getIntersectNode","linkTo","Array","from","rect","CommentManager","comments","on","c","call","comment","k","area","addComment","push","appendChild","removeChild","splice","indexOf","focused","deleteComment","toJSON","list","deleteComments","item","addFrameComment","addInlineComment","forEach","install","disableBuiltInEdit","manager","prompt","destroyKeyListener","handleKey","code","shiftKey","selected","Object","values","mouse","deleteFocusedComment","Error","filter","prev","linkedTo","offset","contains","isContains","clear","fromJSON","exist","name"],"mappings":"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"}